---
isbn: 9787115420268
category: 计算机-编程设计
lastReadDate: 2021-10-30T00:00:00.000Z
doc_type: weread-highlights-reviews
bookId: '907756'
author: Sam Newman
cover: >-
  https://wfqqreader-1252317822.image.myqcloud.com/cover/756/907756/t7_907756.jpg
reviewCount: 2
noteCount: 50
---
# 元数据
> [!abstract] 微服务设计
> - ![ 微服务设计|200](https://wfqqreader-1252317822.image.myqcloud.com/cover/756/907756/t7_907756.jpg)
> - 书名： 微服务设计
> - 作者： Sam Newman
> - 简介： 本书全面介绍了微服务的建模、集成、测试、部署和监控，通过一个虚构的公司讲解了如何建立微服务架构。主要内容包括认识微服务在保证系统设计与组织目标统一上的重要性，学会把服务集成到已有系统中，采用递增手段拆分单块大型应用，通过持续集成部署微服务，等等。
> - 出版时间 2016-04-01 00:00:00
> - ISBN： 9787115420268
> - 分类： 计算机-编程设计
> - 出版社： 人民邮电出版社

# 高亮划线

## 第1章 微服务


- 📌 客户满意度和开发效率。 ^907756-8-530-541
    - ⏱ 2018-04-13 13:23:48 
## 1.1 什么是微服务


- 📌 把因相同原因而变化的东西聚合到一起，而把因不同原因而变化的东西分离开来。”该论述很好地强调了内聚性这一概 ^907756-9-1060-1112
    - ⏱ 2018-04-13 13:27:26 
## 1.4 其他分解技术


- 📌 误）。尽管我不认为这是使用进程隔离的主要原因，但是事实上确实很少有人能够在同一个进程内部做到很好的模块隔离。
除了把系统划分为不同的服务之外，你可能也想要在一个进程内部使用模块进行划分，但是仅仅使用模 ^907756-12-2292
    - ⏱ 2018-04-14 08:19:17 
## 2.4 一个原则性的方法


- 📌 规则对于智者来说是指导，对于愚蠢者来说是遵从。 ^907756-19-432-455
    - ⏱ 2018-04-14 20:25:22 
## 4.6 远程过程调用


- 📌 Thrift ^907756-42-512-518
    - ⏱ 2018-04-14 21:26:34 
## 4.7 REST


- 📌 客户端和服务端之间的通信次数会比较多 ^907756-43-4307-4325
    - ⏱ 2018-04-14 21:41:21 
## 4.8 实现基于事件的异步协作方式


- 📌 它会增加开发流程的复杂度， ^907756-44-778-791
    - ⏱ 2018-04-14 21:50:19 

- 📌 尽量让中间件保持简单，而把业务逻辑放在自己的服务中。 ^907756-44-1016-1071
    - ⏱ 2018-04-14 21:50:43 
## 4.9 服务即状态机


- 📌 不管你选择做一个REST忍者，还是坚持使用像SOAP这样的基于RPC的机制，服务即状态机的概念都很强大。前面提到过（可能已经提的太多了）服务应该根据限界上下文进行划分。我们的客户 ^907756-45-381
    - ⏱ 2018-04-14 21:55:33 
## 第5章 分解单块系统


- 📌 前面几章讨论了什么是好的服务以及为什么小服务能达到更好的效果，还讨论了系统具有可演化性的重要性。但事实上，可能我们手中已经有了很多代码库，而它们无一例外都没有遵循上述的模式。如何 ^907756-53-421
    - ⏱ 2018-04-16 12:48:00 
## 5.12 事务边界


- 📌 两阶段提交 ^907756-65-2816-2828
    - ⏱ 2018-04-16 20:35:21 
## 6.6 定制化镜像


- 📌 实际配置和源代码管理中的配置不再一致，这个问题叫作配置漂移 ^907756-82-3063-3120
    - ⏱ 2018-04-16 21:59:28 
## 6.11 从物理机到虚拟机


- 📌 CoreOS ^907756-87-4803-4809
    - ⏱ 2018-04-16 21:48:12 

- 📌 Kubernetes ^907756-87-5124-5134
    - ⏱ 2018-04-16 21:49:00 
## 第7章 测试


- 📌 从我开始接触编程至今，自动化测试的世界日新月异，并且几乎每个月都会出现新的工具和技术，不断推动这个世界向前发展。不过，如何高效且有效地测试分布式系统的功能依然是一个挑战。本章会剖析一下测 ^907756-90-413
    - ⏱ 2018-04-16 21:56:25 
## 7.2 测试范围


- 📌 TDD（Test-Driven Design，测试驱动开发 ^907756-92-1594-1623
    - ⏱ 2018-04-19 23:18:25 
## 7.3 实现服务测试


- 📌 Mountebank ^907756-93-2434-2444
    - ⏱ 2018-04-19 23:31:00 
## 7.6 脆弱的测试


- 📌 结果就是，你很少能见到有人能够精细地对大范围、高负担的测试进行管理和维护。希望它发生与真正让它发生是不一样的。
7.6.3 大量的堆积
端到端测试的反馈周期过长，不仅会影响开发人员的生产效率，同时任何失败的修复周期也都会变长，这也就不可避免地减少了端到端测试通过的次数。如果只有在所有测试通过的前提下才能部署软件（你应该这么做），那么服务被部署的次数也会减少。
这可能会导致大量的堆积。在修复失败的端到端测试的同时，上游团队一直在提交更多的变更。结果是，除了使修复构建更加困难外，要部署的变更内容也多了。解决这个问题的一个方法是，端到端测试失败后禁止提交代码，但考虑到测试套件的运行时间过长，这个要求通常是不切实际的。试想一下这样的命令：“你们30个开发人员在这个耗时7小时的构建修复之前不准提交代码！” ^907756-96-3328
    - ⏱ 2018-04-19 23:39:40 
## 第8章 监控


- 📌 正如我之前所展示的，将系统拆分成更小的、细粒度的微服务会带来很多好处。然而，它也增加了生产系统的监控复杂性。在本章中，我将带大家看看细粒度的系统在系统监控和定位问题上所面临的挑战，同时还会介绍一些应对方法，让鱼和熊掌兼得！
设想一下这样的场景：一个安静的周五下午，团队期待着早点开溜去酒吧，开始一个远离工作的周末。然而，突然收到一封邮件：网站工作异常！Twitter上到处都是关于贵公司网站出问题的消息，而你的老板在旁边喋喋不休，一个安静的周末就这么没了。
你需要了解的第一件事情是什么？问题到底出在哪里？ ^907756-103-413
    - ⏱ 2018-04-20 20:03:35 
## 8.1 单一服务，单一服务器


- 📌 logrotate ^907756-104-978-987
    - ⏱ 2018-04-20 23:05:42 
## 8.2 单一服务，多个服务器


- 📌 Nagios ^907756-105-930-936
    - ⏱ 2018-04-20 23:08:32 

- 📌 ssh-multiplexers ^907756-105-1076-1092
    - ⏱ 2018-04-20 23:09:54 
## 8.8 关联标识


- 📌 Zipkin ^907756-111-1936-1942
    - ⏱ 2018-04-20 23:29:20 
## 8.9 级联


- 📌 Hystrix ^907756-112-805-812
    - ⏱ 2018-04-20 23:31:34 
## 8.10 标准化


- 📌 让做正确的事情变得容易 ^907756-113-729-740
    - ⏱ 2018-04-20 23:33:19 
## 第9章 安全


- 📌 关于大型系统的安全漏洞导致数据暴露给各种危险人物的故事，我们已经听说了太多。最近的爱德华·斯诺登泄密事件，更加让我们意识到公司持有的用户信息的价值，以及保存在为客户构建的系统中的数据的价值。本章将简要概述设计系统时，在安全方面应该考虑的一些问题。虽然无法包含安全的方方面面，但会列出一些主要的选项给你，为进一步研究提供一个很好的起点。
我们需要考虑，在数据从一个点到另一个点的传输过程中，如何保护它们，也需要考虑在其他情况下如何进行保护。我们需要考虑底层操作系统及网络的安全。有太多需要考虑的点，有太多可以做的事情！那到底需要多安全呢？我们如何知道什么是足够安全呢？ ^907756-117-413
    - ⏱ 2018-04-20 23:39:41 
## 9.1 身份验证和授权


- 📌 身份验证和授权是核心概念 ^907756-118-459-506
    - ⏱ 2018-04-20 23:40:59 

- 📌 SAML和OpenID Connect， ^907756-118-1190-1210
    - ⏱ 2018-04-20 23:42:55 

- 📌 Okta ^907756-118-1794-1798
    - ⏱ 2018-04-20 23:44:45 

- 📌 OpenID ^907756-118-1551-1557
    - ⏱ 2018-04-20 23:53:58 

- 📌 基于Google和其他公司处理SSO的方式，OpenID Connect已经成为了OAuth 2.0具体实现中的一个标准。 ^907756-118-1924-1985
    - ⏱ 2018-04-20 23:57:43 

- 📌 Shibboleth ^907756-118-2915-2925
    - ⏱ 2018-04-20 23:59:39 

- 📌 我们构建的软件要与组织的工作方式相匹配。 ^907756-118-4309-4329
    - ⏱ 2018-04-21 00:03:01 
## 9.2 服务间的身份验证和授权


- 📌 TLS（Transport Layer Security，安全传输层协议） ^907756-119-2919-2956
    - ⏱ 2018-04-21 00:09:03 

- 📌 HMAC（Hash-based Message Authentication Code，基于哈希的消息码） ^907756-119-3605-3658
    - ⏱ 2018-04-21 00:10:37 
## 9.3 静态数据的安全


- 📌 数据加密是一种责任，尤其当它是敏感数据时。希望我们已经做了可以做的一切，以确保攻击者不能攻破我们的网络，也不能攻破我们的应用程序或操作系统，然后近距离访问底层数据。然而，我们需要做好准备，万一他们真的攻破了，我们该怎么办。深度防御非常关键。
在许多有名的安全漏洞中，都发生了静态数据被攻击者获取的情况，且其中的内容对攻击者来说是可读的。这要么是因为数据以未加密的形式存储，要么是因为保护数据的机制有根本性的缺陷。
安全信息的保护机制是多种多样的，但无论你挑选哪种方案，有一些基本的东西需要牢记。 ^907756-120-381
    - ⏱ 2018-04-21 00:18:18 
## 9.4 深度防御


- 📌 AppArmour ^907756-121-2664-2673
    - ⏱ 2018-04-21 08:48:19 
## 9.9 内建安全


- 📌 ZAP ^907756-126-651-654
    - ⏱ 2018-04-21 08:56:32 

- 📌 Nessus ^907756-126-884-890
    - ⏱ 2018-04-21 08:57:00 
## 第10章 康威定律和系统设计


- 📌 到目前为止，本书大部分的内容集中在向细粒度架构迈进时所面临的技术挑战。但除此之外，我们也需要考虑组织方面的问题。在这一章，我们将了解到忽略公司的组织结构会带来什么样的危险。
我们的行业还很年轻，它似乎在不断地重塑自己。不过，一些关键定律还是经受住了时间的考验。例如摩尔定律，它表示集成电路上可容纳的晶体管数目每两年会增加一倍。该定律已经被证明准确得惊人（尽管有人预测，这种趋势已经放缓）。还有一条定律，我发现几乎普遍适用，在我的日常工作中也更有用，那就是康威定律。
梅尔 ·康威于1968年4月在Datamation杂志上发表了一篇名为“How Do Committees Invent”的论文，文中指出： ^907756-129-429
    - ⏱ 2018-04-21 08:59:13 

- 📌 任何组织在设计一套系统（广义概念上的系统）时，所交付的设计方案在结构上都与该组织的沟通结构保持一致。 ^907756-129-894-973
    - ⏱ 2018-04-21 09:00:50 
## 10.4 适应沟通途径


- 📌 你应该分配单个服务的所有权给可以保持低成本变化的团队。 ^907756-133-1324-1380
    - ⏱ 2018-04-21 09:06:45 
## 10.6 共享服务的原因


- 📌 服务会根据业务领域，而不是技术进行建模。 ^907756-135-1311-1331
    - ⏱ 2018-04-21 09:10:17 
## 10.7 内部开源


- 📌 好的守护者会花费大量的精力与提交者进行清晰的沟通，并对他们的工作方式进行引导。糟糕的守护者会以此为借口，向别人发号施令，或施加类似宗教战争般固执的技术决策。这两种行为我都见过，我 ^907756-136-1172-1261
    - ⏱ 2018-04-21 09:15:07 
## 11.2 多少是太多


- 📌 的用户不是经常能阐明需求到底是什么，所以你需要通过问问题来提取正确的信息，并帮助他们了解提供不同级别服务的相对成本。 ^907756-145-806-893
    - ⏱ 2018-04-21 09:48:32 
## 11.4 架构性安全措施


- 📌 在分布式系统中，延迟是致命的。 ^907756-147-2082-2126
    - ⏱ 2018-04-21 09:56:01 

- 📌 断路器 ^907756-147-2402-2412
    - ⏱ 2018-04-21 09:56:31 
## 11.5 反脆弱的组织


- 📌 Chaos Monkey ^907756-148-1177-1189
    - ⏱ 2018-04-21 09:58:08 

- 📌 Hystrix ^907756-148-4552-4559
    - ⏱ 2018-04-21 10:05:50 
## 11.6 幂等


- 📌 对幂等操作来说，其多次执行所产生的影响，均与一次执行的影响相同。 ^907756-149-423-483
    - ⏱ 2018-04-21 10:07:36 
## 11.7 扩展


- 📌 SAN（Storage Area Networ ^907756-150-1933-1956
    - ⏱ 2018-04-21 10:13:34 

- 📌 mod proxy ^907756-150-3097-3106
    - ⏱ 2018-04-21 10:15:47 
## 11.8 扩展数据库


- 📌 Riak ^907756-151-2946-2950
    - ⏱ 2018-04-21 13:07:15 
## 11.9 缓存


- 📌 反向代理Squid或Varnish ^907756-152-1383-1400
    - ⏱ 2018-04-21 13:13:04 

- 📌 cache-control ^907756-152-2005-2018
    - ⏱ 2018-04-21 13:14:31 

- 📌 ETag、Expires和cache-contr ^907756-152-3111-3135
    - ⏱ 2018-04-21 13:16:49 
## 11.11 CAP定理


- 📌 一致性（consistency）、可用性（availability）和分区容忍性（partition tolerance） ^907756-154-570-694
    - ⏱ 2018-04-21 15:19:33 
## 11.13 动态服务注册


- 📌 Consul ^907756-156-1889-1895
    - ⏱ 2018-04-22 09:48:59 
## 11.14 文档服务


- 📌 ，Swagger和HAL， ^907756-157-615-628
    - ⏱ 2018-04-22 09:54:35 
# 读书笔记

## 4.14 用户界面

### 划线评论
- 📌 ￼
图4-8：服务直接提供Ul组件以供组装之用
这种方式有一个工作得很好的变种，即将一系列粗粒度的UI部分组装起来。也就是说不再创建小部件，而是对胖客户端应用的所有内容或一个网站的所有页面进行组装。
这些粗粒度的片段由服务端程序提供，而这些程序又会去调用相关的API。当片段与团队所有权匹配得比较好时，这个模型可以很好地进行工作。比如，也许音乐商店的订单管理团队可以对所有与订单管理相关的页面负责。
你仍然需要某种组装层来把这些片段拉到一起，可以使用类似服务端模板的技术轻松地做到。或者当你从很多不同的应用拉取页面时，需要某种智能的URI路由。  ^13176609-6YGGY7Nam
    - 💭 服务端渲染？
    - ⏱ 2018-04-15 11:21:25
   
# 本书评论

## 书评 No.1 
前半部分：“后面会提到、详细介绍、深入展开”
后半部分：“我们前面提到。”[回头]
 ^13176609-6YRgK5RlO
⏱ 2018-04-22 10:14:21
