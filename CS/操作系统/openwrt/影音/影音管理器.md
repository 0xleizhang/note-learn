
# 选择

emby

 **Jellyfin**

plex

Infuse

 
# 挂载
[openwrt文档](https://openwrt.org/docs/guide-user/services/nas/start)
## SMB = CIFS


[SMB](https://zh.wikipedia.org/wiki/%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%8A%E6%81%AF%E5%8D%80%E5%A1%8A)是微软的文件共享协议

samba 是unix下的软件实现了SMB协议


tinymediamanager 只支持window 所以需要SMB挂载 


##  webDav
挂载阿里云盘：

1. 通过davfs2 挂载，软件包搜索davfs2

`echo -e '\n' | mount.davfs http://localhost:8989 /root/alidriver/`

https://baijiahao.baidu.com/s?id=1710479187777531800&wfr=spider&for=pc

2. 软件包搜[aliyundrive-fuse](https://github.com/messense/aliyundrive-fuse)



## NFS 
服务器 客户端。


## in-kernel 

CIFSD  KSMBD

https://en.wikipedia.org/wiki/CIFSD
https://github.com/coolsnowwolf/lede/issues/3135

https://www.kernel.org/doc/html/latest/filesystems/cifs/ksmbd.html


# 搜刮器


**磁盘文件管理 是基础 。**



win 软件 metadata修改
https://www.tinymediamanager.org/


配合批量重命名软件 -> 才能自动匹配

douban 插件
https://raw.githubusercontent.com/caryyu/jellyfin-plugin-repo/master/manifest-us.json


jellyfin douban搜刮器
安装插件之后 安装[api-server](https://github.com/caryyu/douban-openapi-server)
docker run --rm -d -p 5001:5000 seven4d/douban-openapi-server:latest

通过 `docker builderx build --platform=linux/arm64/v8 -t seven4x/xxx .`重新构建的自用

报错：`WARNING: The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested`

部署在MAC上，内网 

# 下载器 

配合下载器
https://github.com/tympanix/Electorrent


aria2
BT

# 播放客户端

jellyfin 管方
ios下有 infuse 可以直接挂载阿里云盘观看 ，高级功能收费

电视kodi

# 硬解

R5S
GPU Mali-G52 1-Core-2EE  
ARM公司生产

技术方案
QSV, NVENC, AMF, VA-API
VideoToolbox
V4L2

https://jellyfin.org/docs/general/administration/hardware-acceleration.html


https://post.smzdm.com/p/awx44prk/



未解决
官方jellyfin 镜像可能没有驱动 硬件加速都不能生效 ，还有可能我用的视频不支持硬解

硬解不生效： 配置完显卡后重启一下jellyfin


这个镜像有但是安装时提示不支持
https://hub.docker.com/r/nyanmisaka/jellyfin 



# 终极方案

问题： 硬盘损坏，容量限制，硬解不太行

NAS


# 资料
https://baijiahao.baidu.com/s?id=1723476683737556977&wfr=spider&for=pc

https://post.smzdm.com/p/a859320l/

https://www.xiaolaiwo.com/article/openwrt-anzhuang-jellyfin-jiaocheng.html

# 脚本

 

```
docker run --name jellyfin --restart=unless-stopped -d \
--network=host  \
--device /dev/dri:/dev/dri   \
--device /dev/dri/renderD128:/dev/dri/renderD128:rwm \
--device /dev/dri/card0:/dev/dri/card0:rwm \
--device /dev/dri/renderD129:/dev/dri/renderD129:rwm \
--device /dev/dri/card1:/dev/dri/card1:rwm \
-v "/root/jellyfin/cache:/config/transcodes" \
-v "/root/jellyfin/config:/config" \
-v "/root:/media" \
-v /mnt:/mnt \
 "jellyfin/jellyfin"
```

